<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>WonderLust - Find Your Perfect Stay</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      rel="icon"
      href="https://scrnshts.club/wp-content/uploads/2022/05/ico.png"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <style>
      @import url("https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap");

      :root {
        --airbnb-primary-red: #ff385c;
        --airbnb-black: #222222;
        --airbnb-gray-light: #f7f7f7;
        --airbnb-gray-medium: #dddddd;
        --airbnb-gray-dark: #717171;
        --airbnb-white: #ffffff;
        --airbnb-text: #222222;
        --airbnb-hover-red: #e61e4d;
      }

      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        font-family: "Inter", -apple-system, BlinkMacSystemFont, Roboto,
          sans-serif;
      }

      body {
        background-color: var(--airbnb-gray-light);
        color: var(--airbnb-text);
        line-height: 1.5;
        font-size: 14px;
      }

      /* Header Styling */
      header {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        background-color: var(--airbnb-white);
        box-shadow: 0 1px 12px rgba(0, 0, 0, 0.08);
        z-index: 1000;
        padding: 0 80px;
        height: 80px;
        display: flex;
        align-items: center;
        justify-content: space-between;
      }

      .logo {
        display: flex;
        align-items: center;
        gap: 8px;
        font-weight: 700;
        font-size: 1.5rem;
        font-family: monospace;
        color: var(--airbnb-primary-red);
      }

      .logo img {
        height: 50px;
        width: auto;
      }

      nav {
        display: flex;
        align-items: center;
        gap: 24px;
      }

      nav a {
        text-decoration: none;
        color: var(--airbnb-black);
        font-weight: 500;
        padding: 10px 16px;
        border-radius: 22px;
        transition: background-color 0.3s ease;
      }

      nav a:hover {
        background-color: rgba(255, 56, 92, 0.1);
      }

      /* Mobile Dropdown Menu */
      .mobile-dropdown {
        position: relative;
        display: none;
      }

      .mobile-dropdown-btn {
        background: none;
        border: none;
        cursor: pointer;
        padding: 10px;
      }

      .mobile-dropdown-btn span {
        display: block;
        height: 3px;
        width: 25px;
        background-color: var(--airbnb-primary-red);
        margin: 5px 0;
        transition: 0.4s;
      }

      .mobile-dropdown-content {
        display: none;
        position: absolute;
        right: 0;
        top: 100%;
        background-color: rgba(255, 255, 255, 0.9); /* Semi-transparent white */
        min-width: 200px;
        box-shadow: 0 8px 16px rgba(0, 0, 0, 0.1);
        border-radius: 12px;
        z-index: 1;
        overflow: hidden;
        backdrop-filter: blur(
          5px
        ); /* Adds a nice blur effect to content behind */
        border: 1px solid rgba(0, 0, 0, 0.1); /* Optional: subtle border */
      }
      .mobile-dropdown-content a {
        color: var(--airbnb-black);
        padding: 12px 16px;
        text-decoration: none;
        display: block;
        text-align: left;
        transition: background-color 0.3s ease;
      }

      .mobile-dropdown-content a:hover {
        background-color: rgba(255, 56, 92, 0.1);
      }

      .mobile-dropdown.show .mobile-dropdown-content {
        display: block;
      }

      /* Search Container */
      .search-container {
        margin-top: 100px;
        background-color: var(--airbnb-white);
        border: 1px solid var(--airbnb-gray-medium);
        border-radius: 40px;
        box-shadow: 0 6px 20px rgba(0, 0, 0, 0.08);
        padding: 16px;
        display: flex;
        align-items: center;
      }

      .search-container input,
      .search-container select {
        border: none;
        box-shadow: none;
      }

      .search-container .btn {
        background-color: var(--airbnb-primary-red);
        color: var(--airbnb-white);
        border-radius: 24px;
        padding: 10px 20px;
        font-weight: 600;
        border: none;
        transition: background-color 0.3s ease;
      }

      .search-container .btn:hover {
        background-color: var(--airbnb-hover-red);
      }

      /* Listing Card */
      .listing-card {
        background-color: var(--airbnb-white);
        border-radius: 16px;
        overflow: hidden;
        border: 1px solid var(--airbnb-gray-medium);
        box-shadow: 0 6px 16px rgba(0, 0, 0, 0.08);
        transition: transform 0.3s ease, box-shadow 0.3s ease;
        position: relative;
        margin-bottom: 24px;
      }

      .listing-card:hover {
        transform: scale(1.02);
        box-shadow: 0 10px 24px rgba(0, 0, 0, 0.1);
      }

      .listing-img {
        width: 100%;
        height: 280px;
        object-fit: cover;
      }

      .listing-actions {
        position: absolute;
        top: 16px;
        right: 16px;
        display: flex;
        gap: 8px;
        opacity: 0;
        transition: opacity 0.3s ease;
      }

      .listing-card:hover .listing-actions {
        opacity: 1;
      }

      .action-btn {
        background-color: var(--airbnb-white);
        border: none;
        border-radius: 50%;
        width: 40px;
        height: 40px;
        display: flex;
        align-items: center;
        justify-content: center;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.18);
        transition: transform 0.2s ease;
      }

      .action-btn:hover {
        transform: scale(1.1);
      }

      .edit-btn {
        color: var(--airbnb-primary-red);
      }

      .delete-btn {
        color: var(--airbnb-primary-red);
      }

      .card-body {
        padding: 16px;
      }

      .card-title {
        font-weight: 600;
        margin-bottom: 8px;
        font-size: 16px;
      }

      .price-tag {
        font-weight: 600;
        color: var(--airbnb-black);
      }

      .location-info {
        color: var(--airbnb-gray-dark);
        margin-bottom: 8px;
        font-size: 14px;
      }

      .description {
        color: var(--airbnb-gray-dark);
        margin-bottom: 12px;
        display: -webkit-box;
        -webkit-line-clamp: 2;
        -webkit-box-orient: vertical;
        overflow: hidden;
      }

      .btn-details {
        background-color: var(--airbnb-primary-red);
        color: var(--airbnb-white);
        border: none;
        border-radius: 8px;
        padding: 8px 16px;
        font-weight: 600;
        transition: background-color 0.3s ease;
      }

      .btn-details:hover {
        background-color: var(--airbnb-hover-red);
      }

      .badge {
        background-color: rgba(0, 0, 0, 0.04);
        color: var(--airbnb-black);
        margin-right: 8px;
        padding: 6px 10px;
        border-radius: 8px;
      }

      .no-listings {
        background-color: var(--airbnb-white);
        border: 1px solid var(--airbnb-gray-medium);
        border-radius: 16px;
        padding: 48px;
        text-align: center;
        box-shadow: 0 6px 16px rgba(0, 0, 0, 0.08);
      }

      .no-listings i {
        color: var(--airbnb-primary-red);
        margin-bottom: 16px;
      }

      .no-listings h3 {
        font-weight: 600;
        margin-bottom: 8px;
      }

      .no-listings p {
        color: var(--airbnb-gray-dark);
      }

      /* Responsive Adjustments */
      @media (max-width: 768px) {
        header {
          padding: 0 20px;
        }

        nav {
          display: none;
        }

        .mobile-dropdown {
          display: block;
        }

        .search-container {
          margin-top: 80px;
          flex-direction: column;
        }

        .search-container > div {
          width: 100%;
          margin-bottom: 12px;
        }
        .border {
          margin-bottom: 10px;
          border: 5px solid var(--airbnb-primary-red);
        }
      }
      .img img {
        width: 90%;
        height: 50px;
      }

      .like-btn-container {
        position: absolute;
        top: 16px;
        left: 16px;
        z-index: 10;
        /* Remove any opacity:0 if it exists */
      }
      .like-btn-container a {
        text-decoration: none;
      }
      .like-btn {
        background-color: rgba(255, 255, 255);
        border-radius: 50%;
        width: 40px;
        height: 40px;
        display: flex;
        align-items: center;
        justify-content: center;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.18);
        transition: transform 0.2s ease;
      }

      .like-btn:hover {
        transform: scale(1.1);
      }

      .like-btn i {
        font-size: 20px;
        color: #717171; /* Default color (not liked) */
      }

      .like-btn i.liked {
        color: red; /* Red color when liked */
      }
      #taxToggle{
        width: 3rem;
      }
    </style>
  </head>
  <body>
    <header>
      <div class="logo">
        <img
          src="https://logos-world.net/wp-content/uploads/2020/07/Airbnb-Emblem.png"
          alt="WonderLust Logo"
        />WonderLust
      </div>
 
        <nav>
          <div class="d-flex align-items-center justify-content-end margin">
            <span class="me-2 text-muted">Prices without taxes</span>
            <div class="form-check form-switch">
              <input
                class="form-check-input"
                type="checkbox"
                id="taxToggle"
                checked
              />
            </div>
          </div>
        <!DOCTYPE html>
        <html lang="en">
          <head>
            <meta charset="UTF-8" />
            <meta
              name="viewport"
              content="width=device-width, initial-scale=1.0"
            />
            <title>Dropdown Menu</title>
            <style>
              * {
                margin: 0;
                padding: 0;
                box-sizing: border-box;
                font-family: -apple-system, BlinkMacSystemFont, "Segoe UI",
                  Roboto, Oxygen, Ubuntu, Cantarell, "Open Sans",
                  "Helvetica Neue", sans-serif;
              }

              body {
                background-color: #f7f7f7;
                padding: 20px;
              }

              .header {
                display: flex;
                justify-content: space-between;
                align-items: center;
                padding: 10px 20px;
                background-color: white;
                border-bottom: 1px solid #e5e5e5;
              }

              .left-section {
                display: flex;
                align-items: center;
              }

              .switch-link {
                text-decoration: none;
                color: black;
                font-weight: 500;
                font-size: 14px;
              }

              .globe-icon {
                margin-left: 20px;
                cursor: pointer;
              }

              .profile-section {
                position: relative;
              }

              .profile-button {
                display: flex;
                align-items: center;
                background-color: white;
                border: 1px solid #dddddd;
                border-radius: 21px;
                padding: 5px 5px 5px 12px;
                cursor: pointer;
                transition: box-shadow 0.2s ease;
              }

              .profile-button:hover {
                box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
              }

              .menu-icon {
                margin-right: 8px;
              }

              .profile-icon {
                width: 40px;
                height: 40px;
                background-color: #717171;
                border-radius: 50%;
                display: flex;
                justify-content: center;
                align-items: center;
                color: white;
                font-weight: bold;
              }

              .notification-badge {
                position: absolute;
                top: -2px;
                right: -2px;
                width: 16px;
                height: 16px;
                background-color: #ff385c;
                border-radius: 50%;
                border: 2px solid white;
                color: white;
                font-size: 10px;
                display: flex;
                justify-content: center;
                align-items: center;
              }
              .margin{
                 margin-right: -1.4rem;
                }
              .dropdown-menu {
                position: absolute;
                top: 50px;
                right: 0;
                width: 240px;
                background-color: white;
                border-radius: 12px;
                box-shadow: 0 2px 16px rgba(0, 0, 0, 0.12);
                overflow: hidden;
                display: none; /* Initially hidden */
                z-index: 1000;
              }

              .menu-section {
                border-bottom: 1px solid #ebebeb;
              }

              .menu-item {
                padding: 16px;
                cursor: pointer;
                font-size: 14px;
                color: #222222;
                display: flex;
                align-items: center;
                position: relative;
              }

              .menu-item:hover {
                background-color: #f7f7f7;
              }

              .menu-notification {
                width: 8px;
                height: 8px;
                background-color: #ff385c;
                border-radius: 50%;
                position: absolute;
                right: 16px;
              }
              .padd{
                padding: 0;
              }
            </style>
          </head>
          <body>
            <div class="header padd">
              
              <div class="menu-item"><a href="/listings/new"
                ><i class="fa-solid fa-location-dot"></i>&nbsp;&nbsp; Airbnb your
                home</a
              ></div>
              <div class="profile-section">
                <button class="profile-button">
                  <div class="menu-icon">
                    <i class="fa-solid fa-bars"></i>
                  </div>
                  <div class="profile-icon">
                    <span>User</span>
                  </div>
                </button>

                <div class="dropdown-menu">
                    <div class="menu-item"><a href="/listings"
                      ><i class="fa-solid fa-house"></i>&nbsp;&nbsp; Homes</a
                    ></div>
                    <div class="menu-item"><a href="/listings"
                      ><i class="fa-solid fa-globe"></i>&nbsp;&nbsp;Experiences</a
                    ></div> 
                    
                    <%if(!currentUser){%> <div class="menu-item">  
                      <a href="/auth"
                        ><i class="fa-solid fa-right-to-bracket"></i>
                        &nbsp;&nbsp;Login/SignUp</a
                      >
                      </div> <%}%>
                    <div class="menu-item">  <a href="/user/liked-listings">
                      <i class="fas fa-heart"></i>&nbsp;&nbsp; Favorites
                    </a></div>
                    <%if(currentUser){%> <div class="menu-item"> 
                      <a href="/logout"
                        ><i class="fa-solid fa-right-from-bracket"></i>&nbsp;&nbsp; Logout</a
                      >
                      </div>
                      <%}%>
                  </div>
                </div>
              </div>
            </div>

            <script>
              document.addEventListener("DOMContentLoaded", function () {
                const profileButton = document.querySelector(".profile-button");
                const dropdownMenu = document.querySelector(".dropdown-menu");

                // Toggle dropdown menu when profile button is clicked
                profileButton.addEventListener("click", function (e) {
                  e.stopPropagation(); // Prevent this click from triggering the document click listener
                  dropdownMenu.style.display =
                    dropdownMenu.style.display === "block" ? "none" : "block";
                });

                // Close dropdown when clicking anywhere else on the document
                document.addEventListener("click", function () {
                  dropdownMenu.style.display = "none";
                });

                // Prevent dropdown from closing when clicking inside it
                dropdownMenu.addEventListener("click", function (e) {
                  e.stopPropagation();
                });

                // Add click handlers for menu items (optional)
                const menuItems = document.querySelectorAll(".menu-item");
                menuItems.forEach((item) => {
                  item.addEventListener("click", function () {
                    console.log(`Clicked: ${this.textContent.trim()}`);
                    // Here you would typically navigate to a new page or perform some action
                    // For now, we'll just close the dropdown
                    dropdownMenu.style.display = "none";
                  });
                });
              });
            </script>
          </body>
        </html>
        
      </nav>
      <div class="mobile-dropdown">
        
        <button class="mobile-dropdown-btn" onclick="toggleDropdown()">
          <span></span>
          <span></span>
          <span></span>
        </button>
        <div class="mobile-dropdown-content">
          <a href="/listings"
            ><i class="fa-solid fa-house"></i>&nbsp;&nbsp; Homes</a
          >
          <a href="/listings"
            ><i class="fa-solid fa-globe"></i>&nbsp;&nbsp;Experiences</a
          >
          <a href="/listings/new"
            ><i class="fa-solid fa-location-dot"></i>&nbsp;&nbsp; Airbnb your
            home</a
          >
          <%if(!currentUser){%>
          <a href="/auth"
            ><i class="fa-solid fa-right-to-bracket"></i>
            &nbsp;&nbsp;Login/SignUp</a
          >
          <%}%> <%if(currentUser){%>
          <a href="/logout"
            ><i class="fa-solid fa-right-from-bracket"></i>&nbsp;&nbsp;
            Logout</a
          >
          <%}%>
          <a href="/user/liked-listings">
            <i class="fas fa-heart"></i>&nbsp;&nbsp; Favorites
          </a>
          <div class="d-flex align-items-center justify-content-end">
            <span class="me-2 text-muted">Prices without taxes</span>
            <div class="form-check form-switch">
              <input
                class="form-check-input"
                type="checkbox"
                id="taxToggle"
                checked
              />
            </div>
          </div>
        </div>
      </div>
    </header>

    <div class="container">
      <!-- Replace your existing search-container with this updated version -->
      <!-- Make sure your form action matches the route defined in likedListings.js -->
      <!-- Replace your existing search-container with this updated version -->
      <div class="search-container">
        <form action="/advanced-search" method="GET" class="w-100">
          <div class="row w-100">
            <div class="col-md-8">
              <input
                type="text"
                name="searchText"
                class="form-control border"
                placeholder="Search by location, title, or description..."
              />
            </div>
            <div class="col-md-2">
              <select class="form-select border" name="country">
                <option selected value="All Countries">All Countries</option>
                <option value="india">India</option>
                <option value="Costa Rica">Costa Rica</option>
                <option value="United States">USA</option>
                <option value="Switzerland">Switzerland</option>
                <option value="France">France</option>
                <option value="Italy">Italy</option>
                <option value="Japan">Japan</option>
                <option value="Netherlands">Netherlands</option>
                <option value="Tanzania">Tanzania</option>
                <option value="Kingdom">UK London</option>
                <option value="Indonesia">Indonesia</option>
                <option value="Greece">Greece</option>
                <option value="Maldives">Maldives</option>

                <!-- Add more countries as needed -->
              </select>
            </div>
            <div class="col-md-2">
              <button type="submit" class="btn btn-primary w-100">
                <i class="fas fa-search"></i> Search
              </button>
            </div>
          </div>
        </form>
      </div>

      <br />

      <!--scroll bar -->
      <!DOCTYPE html>
      <html lang="en">
        <head>
          <meta charset="UTF-8" />
          <meta
            name="viewport"
            content="width=device-width, initial-scale=1.0"
          />
          <title>Airbnb Style Category Scroller</title>
          <script
            src="https://kit.fontawesome.com/a076d05399.js"
            crossorigin="anonymous"
          ></script>
          <style>
            :root {
              --airbnb-dark: #444343;
              --airbnb-text-gray: #555555;
            }

            * {
              margin: 0;
              padding: 0;
              box-sizing: border-box;
              font-family: Arial, sans-serif;
            }

            body {
              background-color: white;
              color: var(--airbnb-dark);
            }

            .categories-container {
              position: relative;
              padding: 20px 40px;
              border-bottom: 1px solid #ebebeb;
              overflow: hidden;
            }

            .categories-scroll {
              display: flex;
              gap: 24px;
              animation: scroll 30s linear infinite;
            }

            .category-item {
              display: flex;
              flex-direction: column;
              align-items: center;
              min-width: 60px;
              cursor: pointer;
              text-decoration: none;
              color: var(--airbnb-text-gray);
            }

            .category-item:hover {
              opacity: 0.8;
            }

            .category-name {
              font-size: 12px;
              font-weight: 600;
              white-space: nowrap;
              text-align: center;
            }

            .category-icon-container {
              margin-bottom: 8px;
              font-size: 28px;
            }

            @keyframes scroll {
              0% {
                transform: translateX(0);
              }
              100% {
                transform: translateX(-100%);
              }
            }

            .categories-scroll:hover {
              animation-play-state: paused;
            }
          </style>
        </head>
        <body>
          <div class="categories-container">
            <div class="categories-scroll">
              <a href="#" class="category-item"
                ><div class="category-icon-container">
                  <i class="fas fa-umbrella-beach"></i>
                </div>
                <span class="category-name">Beach</span></a
              >
              <a href="#" class="category-item"
                ><div class="category-icon-container">
                  <i class="fas fa-water"></i>
                </div>
                <span class="category-name">Lake</span></a
              >
              <a href="#" class="category-item"
                ><div class="category-icon-container">
                  <i class="fas fa-tree"></i>
                </div>
                <span class="category-name">Countryside</span></a
              >
              <a href="#" class="category-item"
                ><div class="category-icon-container">
                  <i class="fas fa-campground"></i>
                </div>
                <span class="category-name">Camping</span></a
              >
              <a href="#" class="category-item"
                ><div class="category-icon-container">
                  <i class="fas fa-hotel"></i>
                </div>
                <span class="category-name">Cabin</span></a
              >
              <a href="#" class="category-item"
                ><div class="category-icon-container">
                  <i class="fas fa-ship"></i>
                </div>
                <span class="category-name">Boat</span></a
              >
              <a href="#" class="category-item"
                ><div class="category-icon-container">
                  <i class="fas fa-swimming-pool"></i>
                </div>
                <span class="category-name">Pools</span></a
              >
              <a href="#" class="category-item"
                ><div class="category-icon-container">
                  <i class="fas fa-building"></i>
                </div>
                <span class="category-name">House</span></a
              >
              <a href="#" class="category-item"
                ><div class="category-icon-container">
                  <i class="fas fa-place-of-worship"></i>
                </div>
                <span class="category-name">Tower</span></a
              >
              <a href="#" class="category-item"
                ><div class="category-icon-container">
                  <i class="fas fa-mountain"></i>
                </div>
                <span class="category-name">Tree House</span></a
              >
              <a href="#" class="category-item"
                ><div class="category-icon-container">
                  <i class="fas fa-igloo"></i>
                </div>
                <span class="category-name">Domes</span></a
              >
              <a href="#" class="category-item"
                ><div class="category-icon-container">
                  <i class="fas fa-crown"></i>
                </div>
                <span class="category-name">Castle</span></a
              >
              <a href="#" class="category-item"
                ><div class="category-icon-container">
                  <i class="fas fa-skiing"></i>
                </div>
                <span class="category-name">Skiing</span></a
              >
              <a href="#" class="category-item"
                ><div class="category-icon-container">
                  <i class="fas fa-spa"></i>
                </div>
                <span class="category-name">Spa</span></a
              >
              <a href="#" class="category-item"
                ><div class="category-icon-container">
                  <i class="fas fa-warehouse"></i>
                </div>
                <span class="category-name">Loft</span></a
              >
              <a href="#" class="category-item"
                ><div class="category-icon-container">
                  <i class="fas fa-hiking"></i>
                </div>
                <span class="category-name">Hiking</span></a
              >
              <a href="#" class="category-item"
                ><div class="category-icon-container">
                  <i class="fas fa-bed"></i>
                </div>
                <span class="category-name">Room</span></a
              >
              <a href="#" class="category-item"
                ><div class="category-icon-container">
                  <i class="fas fa-dungeon"></i>
                </div>
                <span class="category-name">Cave</span></a
              >
              <a href="#" class="category-item"
                ><div class="category-icon-container">
                  <i class="fas fa-torii-gate"></i>
                </div>
                <span class="category-name">Temple</span></a
              >
              <a href="#" class="category-item"
                ><div class="category-icon-container">
                  <i class="fas fa-star"></i>
                </div>
                <span class="category-name">Luxury</span></a
              >
              <a href="#" class="category-item"
                ><div class="category-icon-container">
                  <i class="fas fa-fire"></i>
                </div>
                <span class="category-name">Fireplace</span></a
              >
              <a href="#" class="category-item"
                ><div class="category-icon-container">
                  <i class="fas fa-paw"></i>
                </div>
                <span class="category-name">Pet Friendly</span></a
              >
              <a href="#" class="category-item"
                ><div class="category-icon-container">
                  <i class="fas fa-binoculars"></i>
                </div>
                <span class="category-name">Adventure</span></a
              >
              <a href="#" class="category-item"
                ><div class="category-icon-container">
                  <i class="fas fa-parachute-box"></i>
                </div>
                <span class="category-name">Skydiving</span></a
              >
            </div>
          </div>
        </body>
      </html>
      <%- include('../partials/flash') %> <% if (AllListing.length > 0) { %>

      <div class="row">
        <% AllListing.forEach(listing => { %>
        <div class="col-lg-4 col-md-6 mb-4">
          <div class="listing-card position-relative">
            <!-- Edit/Delete Buttons (visible on hover) -->
            <% if(currentUser && currentUser._id.equals(listing.owner._id)){ %>
            <div class="listing-actions">
              <a
                href="/listings/<%= listing._id %>/edit"
                class="action-btn edit-btn"
              >
                <i class="fas fa-edit"></i>
              </a>
              <form
                action="/listings/<%= listing._id %>?_method=DELETE"
                method="POST"
                style="display: inline"
              >
                <button type="submit" class="action-btn delete-btn">
                  <i class="fas fa-trash"></i>
                </button>
              </form>
            </div>
            <% } %>
            <!-- Like Button (top right corner) -->
            <% if(currentUser) { %>
            <div class="like-btn-container">
              <a href="/listings/<%= listing._id %>/like" class="like-btn">
                <i
                  class="fas fa-heart <%= currentUser.likedListing && currentUser.likedListing.includes(listing._id.toString()) ? 'liked' : '' %>"
                ></i>
              </a>
            </div>
            <% } %>
            <!-- Wrap image with a link to individual listing page -->
            <a href="/listings/<%= listing._id %>">
              <img
                src="<%= listing.image.url || listing.image %>"
                alt="<%= listing.title %>"
                class="listing-img"
              />
            </a>

            <!-- Card content with fixed title -->
            <div class="card-body">
              <div class="d-flex justify-content-between align-items-start">
                <h5 class="card-title"><%= listing.title %></h5>
                <span class="price-tag"
                  >₹<%= listing.price.toLocaleString() %></span
                >
              </div>
              <div class="location-info">
                <i class="fas fa-map-marker-alt"></i>
                <%= listing.location %>, <%= listing.country %>
              </div>
              <p class="description"><%= listing.description %></p>
              <div class="d-flex justify-content-between align-items-center">
                <div>
                  <span class="badge"><i class="fas fa-bed"></i> 3</span>
                  <span class="badge"><i class="fas fa-bath"></i> 2</span>
                </div>
                <a
                  href="/listings/<%= listing._id %>"
                  class="btn btn-sm btn-details"
                  >View Details</a
                >
              </div>
            </div>
          </div>
        </div>
        <% }); %>
      </div>
      <% } else { %>
      <div class="no-listings">
        <i class="fas fa-home fa-3x mb-3"></i>
        <h3>No Listings Available</h3>
        <p>Check back later for new properties</p>
      </div>
      <% } %>
    </div>

    <!--footer html-->
    <style>
      body {
        margin: 0;
        font-family: "Arial", sans-serif;
      }
      .wonderlust-footer {
        background-color: #ff385c;
        color: white;
        padding: 40px 0 20px;
      }
      .footer-container {
        max-width: 1200px;
        margin: 0 auto;
        display: flex;
        flex-wrap: wrap;
        justify-content: space-between;
        padding: 0 15px;
      }
      .footer-column {
        flex: 1;
        margin-right: 20px;
        min-width: 200px;
      }
      .footer-column h4 {
        border-bottom: 2px solid rgba(255, 255, 255, 0.2);
        padding-bottom: 10px;
        margin-bottom: 15px;
        font-size: 16px;
        font-weight: bold;
      }
      .footer-column ul {
        list-style-type: none;
        padding: 0;
      }
      .footer-column ul li {
        margin-bottom: 10px;
      }
      .footer-column ul li a {
        color: white;
        text-decoration: none;
        opacity: 0.8;
        transition: opacity 0.3s ease;
      }
      .footer-column ul li a:hover {
        opacity: 1;
        text-decoration: underline;
      }
      .footer-bottom {
        background-color: rgba(100, 90, 90, 0.1);
        padding: 20px 0;
        text-align: center;
        margin-top: 20px;
      }
      .social-icons {
        margin-bottom: 15px;
      }
      .social-icons a {
        color: white;
        margin: 0 10px;
        font-size: 24px;
        text-decoration: none;
        transition: transform 0.3s ease;
      }
      .social-icons a:hover {
        transform: scale(1.2);
      }
      .copyright {
        font-size: 14px;
        opacity: 0.8;
      }
      @media (max-width: 768px) {
        .footer-container {
          flex-direction: column;
        }
        .footer-column {
          margin-bottom: 20px;
          width: 100%;
        }
      }
    </style>
    <body>
      <footer class="wonderlust-footer">
        <div class="footer-container">
          <div class="footer-column">
            <h4>Discover</h4>
            <ul>
              <li><a href="#">Destinations</a></li>
              <li><a href="#">Adventure Types</a></li>
              <li><a href="#">Popular Routes</a></li>
              <li><a href="#">Trending Locations</a></li>
              <li><a href="#">Travel Guides</a></li>
            </ul>
          </div>
          <div class="footer-column">
            <h4>Book & Plan</h4>
            <ul>
              <li><a href="#">Accommodations</a></li>
              <li><a href="#">Flights</a></li>
              <li><a href="#">Tour Packages</a></li>
              <li><a href="#">Travel Insurance</a></li>
              <li><a href="#">Visa Information</a></li>
            </ul>
          </div>
          <div class="footer-column">
            <h4>About Wonderlust</h4>
            <ul>
              <li><a href="#">Our Story</a></li>
              <li><a href="#">Careers</a></li>
              <li><a href="#">Press</a></li>
              <li><a href="#">Investor Relations</a></li>
              <li><a href="#">Corporate Responsibility</a></li>
            </ul>
          </div>
          <div class="footer-column">
            <h4>Support</h4>
            <ul>
              <li><a href="#">Help Center</a></li>
              <li><a href="#">Customer Service</a></li>
              <li><a href="#">Cancel Booking</a></li>
              <li><a href="#">Refund Policy</a></li>
              <li><a href="#">Accessibility</a></li>
            </ul>
          </div>
        </div>
        <div class="footer-bottom">
          <div class="social-icons">
            <a href="#" title="Facebook"><i class="fab fa-facebook-f"></i></a>
            <a href="#" title="Instagram"><i class="fab fa-instagram"></i></a>
            <a href="#" title="Twitter"><i class="fab fa-twitter"></i></a>
            <a href="#" title="LinkedIn"><i class="fab fa-linkedin-in"></i></a>
            <a href="#" title="YouTube"><i class="fab fa-youtube"></i></a>
          </div>
          <p class="copyright">&copy; 2025 Wonderlust. All Rights Reserved.</p>
        </div>
      </footer>
    </body>

    <script>
      function toggleDropdown() {
        const dropdown = document.querySelector(".mobile-dropdown");
        dropdown.classList.toggle("show");
      }

      // Close the dropdown if clicked outside
      window.onclick = function (event) {
        if (
          !event.target.matches(".mobile-dropdown-btn") &&
          !event.target.matches(".mobile-dropdown-btn span")
        ) {
          const dropdowns = document.querySelectorAll(".mobile-dropdown");
          dropdowns.forEach((dropdown) => {
            if (dropdown.classList.contains("show")) {
              dropdown.classList.remove("show");
            }
          });
        }
      };
    </script>
    <script>
      document.addEventListener("DOMContentLoaded", function () {
        const taxToggle = document.getElementById("taxToggle");
        const priceElements = document.querySelectorAll(".price-tag");
        const originalPrices = [];

        // Store original prices
        priceElements.forEach((element, index) => {
          const priceText = element.textContent.trim();
          const price = parseFloat(
            priceText.replace("₹", "").replace(/,/g, "")
          );
          originalPrices[index] = price;

          // Add data attribute to store original price
          element.dataset.originalPrice = price;
        });

        // Function to update prices based on toggle state
        function updatePrices(includeTax) {
          priceElements.forEach((element) => {
            const originalPrice = parseFloat(element.dataset.originalPrice);
            let displayPrice;

            if (includeTax) {
              // Add 18% tax
              displayPrice = originalPrice * 1.18;
              element.innerHTML = `₹${displayPrice.toLocaleString(undefined, {
                minimumFractionDigits: 0,
                maximumFractionDigits: 0,
              })} <small class="text-muted">(incl. tax)</small>`;
            } else {
              // Display without tax
              displayPrice = originalPrice;
              element.innerHTML = `₹${displayPrice.toLocaleString(undefined, {
                minimumFractionDigits: 0,
                maximumFractionDigits: 0,
              })}`;
            }
          });
        }

        // Initialize with tax included (since checkbox is checked by default)
        updatePrices(true);

        // Handle toggle changes
        taxToggle.addEventListener("change", function () {
          updatePrices(this.checked);
        });
      });
    </script>

    <!-- Add this CSS to the existing <style> section -->
    <style>
      .price-toggle-container {
        background-color: var(--airbnb-white);
        border-radius: 12px;
        padding: 10px 15px;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
      }

      .form-check-input {
        background-color: var(--airbnb-gray-medium);
        border-color: var(--airbnb-gray-medium);
        width: 3rem;
        height: 1.5rem;
        cursor: pointer;
      }

      .form-check-input:checked {
        background-color: var(--airbnb-primary-red);
        border-color: var(--airbnb-primary-red);
      }

      .price-tag small {
        font-size: 0.7rem;
        font-weight: normal;
      }
    </style>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  </body>
</html>
